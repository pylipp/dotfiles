#makes some shortcuts available for vim instead for shell
stty -ixon

# VI input mode
set -o vi

# https://github.com/altercation/solarized/issues/159#issuecomment-5566892
# People don't recommend exporting TERM in a shell rc. 
# Doing so (without default-terminal="screen-256color" in .tmux.conf, with
# t_Co=16 in .vimrc) gives TERM=screen in a tmux session. The session correctly
# uses the solarized colors, however in vim, text has a bold appearance (colors
# are same). Explicitly setting TERM solves this. Remember to run 
#     xrdb -load ~/.Xresources 
# when having tweaked xterm configs or after logging in.
export TERM="xterm-256color"

# set for i3-sensible-terminal
export TERMINAL="uxterm"

#nvbn/thefuck
command -v thefuck >/dev/null 2>&1 && eval "$(thefuck --alias)"

command -v hub >/dev/null 2>&1 && eval "$(hub alias -s)"

# http://www.simononsoftware.com/virtualenv-tutorial-part-2/
if [ -e /usr/local/bin/virtualenvwrapper.sh ]; then
    export WORKON_HOME=$HOME/.virtualenvs
    . /usr/local/bin/virtualenvwrapper.sh
fi

if [ -e /opt/ros ]; then
    source /opt/ros/*/setup.$(basename $SHELL)
    source ~/repos/virtual_baker/devel/setup.zsh
fi
if [ -e /opt/pylon5 ]; then
    source /opt/pylon5/bin/pylon-setup-env.sh /opt/pylon5/
fi

#http://askubuntu.com/questions/362280/enter-ssh-passphrase-once
SSH_ENV=$HOME/.ssh/env
function start_agent {
    # spawn ssh-agent
    /usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
    chmod 600 "${SSH_ENV}"
    . "${SSH_ENV}" > /dev/null
    /usr/bin/ssh-add
}

if [ -f "${SSH_ENV}" ]; then
     . "${SSH_ENV}" > /dev/null
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
        start_agent;
    }
else
    start_agent;
fi

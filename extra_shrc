#makes some shortcuts available for vim instead for shell
stty -ixon

# VI input mode
set -o vi

# https://github.com/altercation/solarized/issues/159#issuecomment-5566892
# People don't recommend exporting TERM in a shell rc. 
# Doing so (without default-terminal="screen-256color" in .tmux.conf, with
# t_Co=16 in .vimrc) gives TERM=screen in a tmux session. The session correctly
# uses the solarized colors, however in vim, text has a bold appearance (colors
# are same). Explicitly setting TERM solves this. Remember to run 
#     xrdb -load ~/.Xresources 
# when having tweaked xterm configs or after logging in.
export TERM="xterm-256color"

# set for i3-sensible-terminal
export TERMINAL="st"

export EDITOR=/usr/bin/vim

export PYTHONSTARTUP=~/.pythonrc

# make fzf search hidden directories
# https://github.com/junegunn/fzf/issues/337#issuecomment-136389913
export FZF_DEFAULT_COMMAND='ag --hidden --ignore .git -g ""'
export FZF_COMPLETION_TRIGGER='+'

#nvbn/thefuck
command -v thefuck >/dev/null 2>&1 && eval "$(thefuck --alias)"

command -v hub >/dev/null 2>&1 && eval "$(hub alias -s)"

# http://www.simononsoftware.com/virtualenv-tutorial-part-2/
if [ -e /usr/local/bin/virtualenvwrapper.sh ]; then
    export WORKON_HOME=$HOME/.virtualenvs
    . /usr/local/bin/virtualenvwrapper.sh
elif [ -e /usr/share/virtualenvwrapper/virtualenvwrapper.sh ]; then
    export WORKON_HOME=$HOME/.virtualenvs
    . /usr/share/virtualenvwrapper/virtualenvwrapper.sh
fi

#http://askubuntu.com/questions/362280/enter-ssh-passphrase-once
SSH_ENV=$HOME/.ssh/env
if [ ! -e "$SSH_ENV" ]; then
    mkdir -p $HOME/.ssh
    touch "$SSH_ENV"
fi
function start_agent {
    # spawn ssh-agent
    /usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
    chmod 600 "${SSH_ENV}"
    . "${SSH_ENV}" > /dev/null
    /usr/bin/ssh-add
}

if [ -f "${SSH_ENV}" ]; then
     . "${SSH_ENV}" > /dev/null
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
        start_agent;
    }
else
    start_agent;
fi

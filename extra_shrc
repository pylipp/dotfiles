#makes some shortcuts available for vim instead for shell
stty -ixon

# VI input mode
set -o vi

#nvbn/thefuck
command -v thefuck >/dev/null 2>&1 && eval "$(thefuck --alias)"

command -v hub >/dev/null 2>&1 && eval "$(hub alias -s)"

# http://www.simononsoftware.com/virtualenv-tutorial-part-2/
if [ -e /usr/local/bin/virtualenvwrapper.sh ]; then
    export WORKON_HOME=$HOME/.virtualenvs
    . /usr/local/bin/virtualenvwrapper.sh
elif [ -e /usr/share/virtualenvwrapper/virtualenvwrapper.sh ]; then
    export WORKON_HOME=$HOME/.virtualenvs
    . /usr/share/virtualenvwrapper/virtualenvwrapper.sh
fi

#http://askubuntu.com/questions/362280/enter-ssh-passphrase-once
SSH_ENV=$HOME/.ssh/env
if [ ! -e "$SSH_ENV" ]; then
    mkdir -p $HOME/.ssh
    touch "$SSH_ENV"
fi
function start_agent {
    # spawn ssh-agent
    /usr/bin/ssh-agent | sed 's/^echo/#echo/' > "${SSH_ENV}"
    chmod 600 "${SSH_ENV}"
    . "${SSH_ENV}" > /dev/null
    /usr/bin/ssh-add
}

if [ -f "${SSH_ENV}" ]; then
     . "${SSH_ENV}" > /dev/null
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
        start_agent;
    }
else
    start_agent;
fi

vman() {
    # vim -c "Man $1 $2" -c "silent only" #requires vim-man plugin
    PAGER="/bin/sh -c \"col -b | vim -R -c 'set ft=man' -\"" command man "$@"
}

installed() {
    # check for installed package; all options passed to fzf
    dpkg --list | fzf --multi "$@"
}
